### 什么是vim

#### linux下两大编辑器之一

- linux、Unix下使用最多的编辑器
- vi的改进版
- 可能是最难上手的编辑器之一

### 为什么要学习Vim

#### 都21世纪了，为什么还需要学习vim

- 只要你用服务器，vim就是必备技能
- 后端和运维工程师必须掌握的编辑器，不然服务器上操作很尴尬
- 可以以纯键盘编辑，提升编辑效率

### 痛点

#### Vim难上手，学习曲线陡

- vim视频学习资料很少，网上很多博客讲的比较零散，不够直观
- 缺少系统的教程，vim命令众多，难以学习和记忆
- Vim学习曲线陡峭，需要较长时间才能上手，劝退很多初学者

### 课程目的

#### 帮你驯服vim

- 了解和掌握Vim的基本概念
- 熟悉Vim基本方法，能够做到日常编辑（纯键盘编辑）
- 知道如何自定义Vim，安装插件无线扩充Vim功能

### 课程内容

#### 如何学习？

- Vim的概念和基本操作，比如移动和增删改查
- 如何配置Vim，编写自己的vimrc文件
- 如何安装和使用插件，无线扩充Vim功能

### 受众

#### 那些人可以从课程中受益？

- 运维工程师、后端开发工程师等
- Linux用户
- 对Vim感兴趣，想要提升开发效率的开发者或普通用户

### 预备知识

#### 不要求掌握Vim的基本知识，但最好使用过Linux、Unix系统

- 熟悉基本的命令操作（一般Vim多在Linux服务器上使用）
- 知道如何安装Vim
- 有其他编辑器使用经验，几乎所有流行的IDE和编辑器都有Vim的扩展

### 课程特色

#### 学会Vim非一日之功，得靠肌肉记忆

- 由浅入深，循环渐进，从基本概念和操作讲起
- 授人以鱼，不如授人以渔，学会了插件扩充vim功能
- 大量实践技巧

---

### 下载和安装

#### 作为开发或运维，安装Vim应该很简单

- Linux、Unix自带Vim，直接从终端输入Vim即可进入
- Windows用户可以下载Gvim等安装和体验
- 建议Windows用户尝试使用虚拟机来体验Linux下的Vim

### 初始Vim

#### 据说stackoverflow帮助过上百万的开发者退出过vim

- 输入vim进入vim
- 进去之后似乎无法输入东西，起始默认进去的是normal模式
- 使用`:q`可以退出vim

### 开始编辑

#### 进入编辑模式就可以像其他编辑器一样编辑了

- 使用`i`进入编辑模式，开始输入文字
- `i`表示（insert），`a`（append），`o`（open a line below）
- `A`表示（append before line），`I`标示（insert before line），`O`标示（append a line above）
- 使用`ESC`又可以回到normal模式。使用`:wq`保存退出

### 课后练习

#### 用Vim考的是肌肉记忆，赶紧自己操作练习下

- 通过搜索引擎学习如何安装，并在你的系统中安装好Vim
- 进入Vim，使用a、i、o到insert编辑模式输入文本
- 退出到默认normal模式，保存并退出Vim

---

### “怪异”的Vim模式

#### vim和其他很多编辑器的区别在于多种模式

- 进入Vim默认的是normal（普通）模式？为什么不是编辑模式
- 使用`a`（append）`i`（insert）等进入编辑模式
- 还有`:cmd`命令模式和`v`（isual）可视化模式

### 为什么进入Vim不能插入--normal模式

#### 奇怪的是，为什么vim进入之后不能像其他编辑器一样直接插入？

- 进入Vim默认是normal（普通）模式，使用Esc从插入回到普通模式
- 普通模式下可以进行各种命令操作和移动
- 大部分情况下你是在浏览而不是编辑，所以Vim默认是normal

### insert（插入）模式

#### 插入模式下Vim可以直接编辑，和其他编辑器一样

- 使用`i`（insert），`a`（append），`o`（open a line below）进入插入模式
- 使用`ESC`退出插入模式到`normal`模式
- 你也可以试试I,A,O如何进入插入模式的？

### command（命令）模式

#### Normal模式下输入`：`之后执行命令，比如保存退出`:wq`

- 顾名思义，执行Vim命令，保存`:w`,退出`:q`
- 比如分屏`:vs`竖分屏，`:sp` 横分屏
- 使用`:% s/foo/bar/g` 全局替换

### Visual（可视）模式

#### Visual模式一般用来块状选择文本

- Normal模式下使用v进入visual选择
- 使用v选择行
- 使用ctrl+v进行块状选择

### 课后练习

#### 理解和使用Vim常用的4种模式

- 找一个文件编辑，在插入和普通模式之间切换
- 使用命令模式替换单词
- 尝试使用visual可视化模式，想想他的应用场景

---

### 如何快速纠错

#### 代码就像是人生，总是经常出错，需要我们快速修正

- 进入vim之后，首先使用a、i、o之一进入插入模式
- ctrl + h删除上一个字符，ctrl + w 删除上一个单词，ctrl + u删除当前行
- ctrl + a快速移动到开头，ctrl + e 快速移动到结尾 ctrl + b 向前移动，ctrl + f 向后移动 （**终端下**）

### 快速切换insert和normal模式

#### 很多键盘的键位设置，Esc按起来可能不太方便，不方便切换到normal模式

- 使用ctrl + c 代替Esc（但是可能中断某个插件）或者ctrl + [
- `gi` 快速跳转到最后一次编辑的地方并进入插入模式
- 使用映射一些快捷键来替代Esc

---

### 反人类非hjkl

#### 众所周知vim normal模式使用反人类的hjkl来移动

- 据说编辑器作者在编写vim的时候还没流行使用上下左右进行移动
- 左（h），j（下），k（上），l（右），移动也不说让手指脱离主键盘区

### 在单词之间（飞舞）

#### 在单词之间的移动是我们浏览操作中最常使用的命令

- `w、W`移动到下一个`word、WORD`开头，`e、E`下一个`word、WORD` 尾部
- `b、B`移动到上一个`word、WORD`开头，可以理解为backword
- word指的是以非空白字符分割的单词，WORD以空白字符分割的单词

### 行间搜索移动

#### 同一行快速移动的方式其实是搜索一个字符并且快速移动到该字符

- 使用f（cahr）可以移动到char字符上，t移动到char的前一个字符
- 如果第一次没有搜到，可以使用`；`或`，`继续搜索该行的上一个或下一个
- 大写的F表示反过来搜索前面的字符

### vim水平移动

#### 如何快速移动到一行的行首或行尾

- 0移动到行首第一个字符，^ 移动到第一个非空白字符
- $ 移动到行尾，g_ 移动到行尾非空白字符
- 记住常用的0和$就基本够用了

### vim垂直移动

#### 我们还可以在句子（sentence）和段落（paragraph）间移动（不常用）

- 使用括号（）在句子间移动，你可以用`:help`来查看帮助
- 使用`{}`在段落之间移动
- 插件使用`easy-motion`插件移动

### vim页面移动

#### 翻页命令太多，2/8定律，记住常见的就能满足需求

- gg / G 移动到文件开头和结尾，你可以使用ctrl + o快速返回
- H、M、L跳转到屏幕开头（head），中间（Middle）和结尾（Lower）
- `ctrl+ u`、`ctrl + f`上下翻页（upword、forward），zz把屏幕置为中间

---

### vim增加字符

#### 增加字符就是进入插入模式

- 进入插入模式编辑文本
- 使用a、i、o进入插入模式

### vim快速删除

#### 如何快速删除一个字符或单词

- vim在normal模式下使用x快速删除一个字符
- 使用d(delete)配合文本对象快速删除一个单词daw （d around word）
- d 和 x都可以配和数字执行多次

### vim快速修改

#### 相比删除，更常用修改，一般是删除之后改成我们期望的文本

- 常用有三个，r（replace），c（change），s（substitute）
- normal模式下使用r可以替换一个字符，s替换并进入插入模式
- 使用c配合文本对象，我们可以快速进行修改

### vim查询

#### 查询单词也是一个常用操作

- 使用`/`或者 `？` 进行前向或后向搜索
- 使用`n/N`跳转到下一个或上一个匹配
- 使用*或者#进行当前单词的前向或后向匹配

### vim替换命令

#### substitute命令允许我们查找并且替换掉文本，并且支持正则

- :[range]s[ubstitute]/{pattern}/{string}/[flags]
- range表示范围，比如：10,20表示10～20行，%表示全部
- pattern是要替换的模式，string是替换后文本
- flags的几个常用标志
  - g（global）标示全局范围内执行
  - c（confirm）表示确认或者拒绝修改
  - n（number）报告匹配到的次数而不替换，可以用来查询匹配次数

---

### buffer window Tab

#### 文件操作相关概念

- Buffer是指打开一个文件的内存缓存区
- 窗口是Buffer可视化的分割区域
- Tab可以组织窗口为一个工作区

### Buffer

#### buffer 什么是缓冲区

- vim打开一个文件后会加载文件内容到缓冲区
- 之后的修改都是针对内存中的缓冲区，并不会直接保存到文件
- 直到我们执行`：w`的时候我们才会把修改内容写入到文件

### Buffer切换

#### 如何在buffer之间切换呢

- 使用`:ls` 会列举当前缓冲区，然后使用`:b n` 跳转到n个缓冲区
- `:bpre` `:bnext ` `:bfirst` `:blast`
- 或者使用`:b buffer_name`加上tab补全来跳转

### window窗口

#### 窗口是可视化的分割区域

- 一个缓冲区可以分割成多个窗口，每个窗口可以打开不同缓冲区
- `<Ctrl + w> s` 水平分割 `<ctrl + w> v` 垂直分割。或者:sp 和:vs

### 如何切换窗口

#### 切换窗口的命令都是使用Ctrl + w 作为前缀

| 命令         | 用途             |
| ------------ | ---------------- |
| <ctrl + w> w | 在窗口间循环切换 |
| <ctrl + w> h | 切换到左边的窗口 |
| <ctrl + w> j | 切换到下边的窗口 |
| <ctrl + w> k | 切换到上边的窗口 |
| <ctrl + w> l | 切换到右边的窗口 |

### 如何重排窗口

#### 重排窗口可以改变窗口的大小`：h` window-resize 查看文档

| 命令               | 用途                       |
| ------------------ | -------------------------- |
| <ctrl + w> =       | 使所有窗口等宽，等高       |
| <ctrl + w> _       | 最大化活动创建的高度       |
| <ctrl + w> \|      | 最大化活动窗口的宽度       |
| [n]<ctrl + w>      | 把活动窗口的高度设为[n]行  |
| [n] <ctrl + w>  \| | 把活动窗口的宽度设为[n] 列 |

### tab（标签页）将窗口分组

#### tab是可以容纳一系列窗口的容器（：h tabpage）

- vim的Tab和其他编辑器不太一样，可以想象成为一个linux的虚拟桌面
- 比如一个Tab全用来编辑python文件，一个Tab全是HTML文件
- 相比较窗口，Tab一般用的比较少，Tab太多管理起来比较麻烦

### Tab（标签页）操作

#### tab使用的不多，简单了解一下常用的操作就好

| 命令                    | 用途                                 |
| ----------------------- | ------------------------------------ |
| :table [dit] {dilename} | 在新标签页打开{filename}             |
| <ctrl + w>  T           | 把当前窗口移到一个新的标签页         |
| :tabc[lose]             | 关闭当前标签页及其中所有窗口         |
| :tabo[nly]              | 只保留活动标签页，关闭所有其他标签页 |
| :tabn [ext] {N}         | 切换到编号为{N}的标签页              |
| :tabn     或 gt         | 切换到下一个标签页                   |
| :tabp      或gT         | 切换到上一个标签页                   |

---

### 文本对象操作方式

- [number] <command> [text object]
- number 表示次数 command表示命令 d（delete） c（change） y（yank）
- text object 是要操作的文本对象，比如单词 w 句子s 段落 p

### vimNormal模式复制粘贴

- normal模式下复制粘贴使用y（yank） 和p（put），剪贴d和p
- 也可以使用v命令选中要复制的地方，y复制，p粘贴
- 配合文本对象，比如使用yiw复制一个单词，yy复制一行

### Insert模式下的复制粘贴

- 这个和其他的文本编辑器差不多，但是粘贴代码有个坑
- 很多人在vimrc中设置了autoindent，粘贴python代码缩进错乱
- 这时候需要使用set paste 和set nopaste 解决

### 深入寄存器

#### vim不适用单一剪粘板进行剪切，粘贴，而是多组寄存

- 通过“{register} 前缀可以指定寄存器，不指定默认使用无名寄存器
- 比如使用”ayiw 复制一个单词到a中，“bdd删除当前行到寄存器b中
- vim中”“表示无名寄存器，缺省使用，”“p 其实等同于p

### 其他常见寄存器

#### 除了有名的a-z，vim中还有其他常见的寄存器

- 复制专用寄存器，”0 使用y复制文本同时会被拷贝到寄存器0
- 系统剪切板，“+ 可以在复制前加上，”+ 复制到系统剪切板
- 其他一些寄存器比如“% 当前文件名，”. 上次插入的文本

### 如何使用宏

#### 宏的使用分为录制和回放

- vim使用q来录制，同时q结束录制
- 使用q{register}选择要保存的寄存器，把录制的命令保存其中
- 使用@{register}回放寄存器中保存的一些列操作

### vim补全大法

#### 只要手速快，补全什么都是浮云

- 补全是根据当前环境上下文编辑器【猜】你想输入的东西
- 比如补全一个单词，文件名，或者代码中的函数名，变量名
- vim中提供了多种补全功能，还可以使用插件来拓展

#### vim中有很多种补全方式

| 命令            | 补全类型         |
| --------------- | ---------------- |
| <C - n>         | 普通关键字       |
| <C - x> <C - n> | 当前缓冲区关键字 |
| <C - x> <C - i> | 包含文件关键字   |
| <C - x> <C - ]> | 标签文件关键字   |
| <C - x><C - k>  | 字典查找         |
| <C - x> <C - l> | 整行补全         |
| <C - x> <C - f> | 文件名补全       |
| <C - x> <C - o> | 全能补全         |

### 常见的三种补全类型

#### 最常见的有三种

- 使用ctrl + n和ctrl + p补全单词
- 使用ctrl + x ctrl + f补全文件名
- 使用ctrl + x ctrl + o 补全代码，需要开启文件类型查看，安装插件

---

### vim更换配色

#### 很多现代化的编辑器和IDE都支持更换主题，Vim当然也一样

- 使用：colorscheme 显示当前的主题颜色，默认是default
- 用:colorscheme <ctrl + d> 可以显示所有配色
- 用：colorscheme 配色名，就可以更换配色






































