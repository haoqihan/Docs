

#### 介绍

##### 优点

- 协程的切换开销更小，属于程序级别的切换，操作系统完全感知不到，因而更加轻量级
- 单线程内就可以实现并发的效果，最大限度地利用cpu

##### 缺点

- 协程的本质是单线程下，无法利用多核，可以是一个程序开启多个进程，每个进程内开启多个线程，每个线程内开启协程
- 协程指的是单个线程，因而一旦协程出现阻塞，将会阻塞整个线程

##### 总结协程特点

- 必须在只有一个单线程里实现并发
- 修改共享数据不需加锁
- 用户程序里自己保存多个控制流的上下文栈
- 附加：一个协程遇到IO操作自动切换到其它协程（如何实现检测IO，yield、greenlet都无法实现，就用到了gevent模块（select机制））

#### 什么是协程

- 在一个线程内的多个任务之间能够互相切换
- 这个切换不是操作系统级别的 都是用户控制的
- 最简单的切换以及状态的保留使用python原生的语法yield其实就可以实现
- 但是一般情况下我们都是用gevent来完成协程的工作
  - 它能够帮助我们规避IO操作
  - 它内部使用的协程机制是greenlet
- **简要回答**
  - **协程的本质就是线程,能够在多个任务之间切换来节省一些IO时间**
  - **协程中任务之间的切换也需要时间,但是开销要远远小于进程和线程之间的切换**

